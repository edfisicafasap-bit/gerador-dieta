<script>
    const S_URL = 'https://xyqqngskrjzhxbsackul.supabase.co';
    const S_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh5cXFuZ3Nrcmp6aHhic2Fja3VsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk5NTI3NzksImV4cCI6MjA4NTUyODc3OX0.B90q1Jv-vodVIV_dLFUCOekyshrv3HekVpPugpPaHRI';
    const OPENAI_KEY = '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';

    const _supabase = supabase.createClient(S_URL, S_KEY);

    async function verificarAcesso() {
        const emailFornecido = document.getElementById('user-email').value;
        
        // Ajustado para 'Usuarios_Dieta' e a coluna 'e-mail' com hífen conforme seu print
        const { data, error } = await _supabase.from('Usuarios_Dieta').select('*').eq('e-mail', emailFornecido).single();

        if (error || !data) {
            alert("E-mail não encontrado ou sem acesso ativo.");
        } else if (data.contagem_semanal >= 2) { // Ajustado para contagem_semanal conforme seu print
            alert("Você já atingiu o limite de 2 planos esta semana!");
        } else {
            document.getElementById('login-section').style.display = 'none';
            document.getElementById('dieta-section').style.display = 'block';
        }
    }
    // ... restante do código de gerarDieta continua igual
</script>
